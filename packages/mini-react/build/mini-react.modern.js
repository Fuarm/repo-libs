function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},e.apply(this,arguments)}let t=null,n=null,o=null,r=null,l=null;const a=e=>"children"!==e,i=(e,t)=>n=>e[n]!==t[n],c=e=>e.startsWith("on");function s(e,t,n){var o;Object.keys(t).filter(a).filter((o=n,e=>!(e in o))).forEach(t=>e[t]=""),Object.keys(n).filter(a).filter(i(t,n)).forEach(t=>e[t]=n[t]),Object.keys(t).filter(c).filter(e=>!(e in n)||i(t,n)(e)).forEach(n=>{const o=n.toLowerCase().substring(2);e.removeEventListener(o,t[n])}),Object.keys(n).filter(c).filter(i(t,n)).forEach(t=>{const o=t.toLowerCase().substring(2);e.addEventListener(o,n[t])})}function p(e,t){e.dom?t.removeChild(e.dom):p(e.child,t)}function u(e){if(!e)return;let t=e.parent;for(;!t.dom;)t=t.parent;const n=t.dom;"PLACEMENT"===e.effectTag&&null!==e.dom?n.appendChild(e.dom):"UPDATE"===e.effectTag&&null!==e.dom?s(e.dom,e.alternate.props,e.props):"DELETION"===e.effectTag&&p(e,n),u(e.child),u(e.sibling)}function f(e){if(e&&e.type&&e.type instanceof Function?function(e){n=e;const t=[e.type(e.props)];n.hooks=[],d(e,t)}(e):function(e){e.dom||(e.dom=function(e){const t="TEXT_ELEMENT"===e.type?document.createTextNode(""):document.createElement(e.type);return s(t,{},e.props),t}(e)),d(e,e.props.children)}(e),e.child)return e.child;let t=e;for(;t;){if(t.sibling)return t.sibling;t=t.parent}}function d(e,t){let n=0,o=e.alternate&&e.alternate.child,r=null;for(;n<t.length||null!=o;){const a=t[n];let i=null;const c=o&&a&&a.type===o.type;c&&(i={type:o.type,props:a.props,dom:o.dom,parent:e,alternate:o,effectTag:"UPDATE"}),!c&&a&&(i={type:a.type,props:a.props,dom:null,parent:e,alternate:null,effectTag:"PLACEMENT"}),!c&&o&&(o.effectTag="DELETION",l.push(o)),o&&(o=o.sibling),0===n?e.child=i:a&&(r.sibling=i),r=i,n++}}requestIdleCallback(function e(n){let a=!1;for(;t&&!a;)t=f(t),console.log("deadlineðŸš—",n.timeRemaining()),console.log("ðŸŒ²",t),a=n.timeRemaining()<1;!t&&o&&(l.forEach(u),u(o.child),r=o,o=null),requestIdleCallback(e)});const h={createElement:function(t,n,...o){return{type:t,props:e({},n,{children:o.map(e=>"object"==typeof e?e:{type:"TEXT_ELEMENT",props:{nodeValue:e,children:[]}})})}},render:function(e,n){o={dom:n,props:{children:[e]},alternate:r},l=[],t=o},useState:function(e){const a=n.alternate&&n.alternate.hook,i={state:a?a.state:e,queue:[]};return(a?a.queue:[]).forEach(e=>{i.state=e(i.state)}),n.hook=i,[i.state,e=>{i.queue.push(e),o={dom:r.dom,props:r.props,alternate:r},t=o,l=[]}]}};export{h as default};
//# sourceMappingURL=mini-react.modern.js.map
